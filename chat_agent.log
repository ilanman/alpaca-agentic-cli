2025-06-17 14:39:46,172 - chat.agent - INFO - Initialized ChatAgent with model: gpt-4o
2025-06-17 14:39:47,697 - chat.agent - INFO - Token count: 25
2025-06-17 14:39:47,698 - chat.agent - INFO - Processing persisted query
2025-06-17 14:39:48,850 - chat.agent - INFO - Received direct response from model
2025-06-17 14:42:50,106 - chat.agent - INFO - Initialized ChatAgent with model: gpt-4o
2025-06-17 14:42:51,884 - chat.agent - INFO - Token count: 25
2025-06-17 14:42:51,884 - chat.agent - INFO - Processing persisted query
2025-06-17 14:42:53,366 - chat.agent - ERROR - Unexpected error: object ChatCompletion can't be used in 'await' expression
2025-06-17 14:42:58,796 - chat.agent - ERROR - Unexpected error: object ChatCompletion can't be used in 'await' expression
2025-06-17 14:43:03,980 - chat.agent - ERROR - Unexpected error: object ChatCompletion can't be used in 'await' expression
2025-06-17 14:43:03,980 - chat.agent - ERROR - OpenAI API call failed: object ChatCompletion can't be used in 'await' expression
2025-06-17 14:43:03,980 - chat.agent - ERROR - Chat process failed: Failed to get response from OpenAI: object ChatCompletion can't be used in 'await' expression
2025-06-17 14:43:38,869 - chat.agent - INFO - Initialized ChatAgent with model: gpt-4o
2025-06-17 14:43:40,412 - chat.agent - INFO - Token count: 25
2025-06-17 14:43:40,413 - chat.agent - INFO - Processing persisted query
2025-06-17 14:43:40,419 - chat.agent - ERROR - Chat process failed: 'coroutine' object has no attribute 'choices'
2025-06-17 14:44:09,906 - chat.agent - INFO - Initialized ChatAgent with model: gpt-4o
2025-06-17 14:44:11,085 - chat.agent - INFO - Token count: 25
2025-06-17 14:44:11,086 - chat.agent - INFO - Processing persisted query
2025-06-17 14:44:12,211 - chat.agent - INFO - Received direct response from model
2025-06-17 14:44:17,844 - chat.agent - INFO - Token count: 55
2025-06-17 14:44:17,844 - chat.agent - INFO - Processing persisted query
2025-06-17 14:44:19,221 - chat.agent - INFO - Calling tool: get_market_clock with args: {}
2025-06-17 14:44:20,849 - chat.agent - INFO - Received tool response from model
2025-06-17 14:44:28,916 - chat.agent - INFO - Token count: 208
2025-06-17 14:44:28,916 - chat.agent - INFO - Processing disposable query
2025-06-17 14:44:29,723 - chat.agent - INFO - Received direct response from model
2025-06-17 14:44:41,631 - chat.agent - INFO - Token count: 231
2025-06-17 14:44:41,632 - chat.agent - INFO - Processing persisted query
2025-06-17 14:44:42,947 - chat.agent - INFO - Received direct response from model
2025-06-17 14:46:50,827 - chat.agent - INFO - Initialized ChatAgent with model: gpt-4o
2025-06-17 14:46:52,006 - chat.agent - INFO - Token count: 25
2025-06-17 14:46:52,006 - chat.agent - INFO - Processing persisted query
2025-06-17 14:46:52,756 - chat.agent - INFO - Received direct response from model
2025-06-17 14:47:01,226 - chat.agent - INFO - Token count: 37
2025-06-17 14:47:01,226 - chat.agent - INFO - Processing persisted query
2025-06-17 14:47:03,833 - chat.agent - INFO - Received direct response from model
2025-06-17 14:47:06,178 - chat.agent - INFO - Token count: 51
2025-06-17 14:47:06,178 - chat.agent - INFO - Processing persisted query
2025-06-17 14:47:07,447 - chat.agent - INFO - Received direct response from model
2025-06-17 14:47:24,825 - chat.agent - INFO - Token count: 64
2025-06-17 14:47:24,826 - chat.agent - INFO - Processing persisted query
2025-06-17 14:47:25,645 - chat.agent - INFO - Received direct response from model
2025-06-17 14:49:56,697 - chat.agent - INFO - Initialized ChatAgent with model: gpt-4o
2025-06-17 14:49:58,516 - chat.agent - INFO - Processing persisted query
2025-06-17 14:49:59,711 - chat.agent - INFO - Received direct response from model
2025-06-17 14:50:03,435 - chat.agent - INFO - Processing persisted query
2025-06-17 14:50:04,135 - chat.agent - INFO - Received direct response from model
2025-06-17 14:50:17,396 - chat.agent - INFO - Processing persisted query
2025-06-17 14:50:18,191 - chat.agent - INFO - Received direct response from model
2025-06-17 14:51:41,076 - chat.agent - INFO - Initialized ChatAgent with model: gpt-4o
2025-06-17 14:51:42,429 - chat.agent - INFO - Processing persisted query
2025-06-17 14:51:43,911 - chat.agent - INFO - Received direct response from model
2025-06-17 14:51:54,392 - chat.agent - INFO - Processing persisted query
2025-06-17 14:51:59,674 - chat.agent - INFO - Received direct response from model
2025-06-17 14:53:50,985 - chat.agent - INFO - Initialized ChatAgent with model: gpt-4o
2025-06-17 14:53:52,138 - chat.agent - INFO - Processing persisted query
2025-06-17 14:53:53,950 - chat.agent - INFO - Received direct response from model
2025-06-17 14:53:54,851 - chat.agent - INFO - Processing persisted query
2025-06-17 14:53:56,221 - chat.agent - INFO - Received direct response from model
2025-06-17 14:54:01,708 - chat.agent - INFO - Processing persisted query
2025-06-17 14:54:03,352 - chat.agent - INFO - Received direct response from model
2025-06-17 14:55:28,019 - chat.agent - INFO - Initialized ChatAgent with model: gpt-4o
2025-06-17 14:55:29,449 - chat.agent - INFO - Processing persisted query
2025-06-17 14:55:30,388 - chat.agent - INFO - Received direct response from model
2025-06-17 14:55:39,807 - chat.agent - INFO - Processing persisted query
2025-06-17 14:55:40,809 - chat.agent - INFO - Calling tool: place_stock_order with args: {'symbol': 'AMZN', 'side': 'buy', 'quantity': 1}
2025-06-17 14:55:43,923 - chat.agent - INFO - Received tool response from model
2025-06-17 14:56:19,597 - chat.agent - INFO - Processing persisted query
2025-06-17 14:56:20,435 - chat.agent - INFO - Received direct response from model
2025-06-17 14:59:21,850 - chat.agent - INFO - Processing persisted query
2025-06-17 14:59:22,607 - chat.agent - INFO - Received direct response from model
2025-06-17 14:59:33,917 - chat.agent - INFO - Processing persisted query
2025-06-17 14:59:34,728 - chat.agent - INFO - Calling tool: get_stock_bars with args: {'symbol': 'TSLA', 'days': 20}
2025-06-17 14:59:42,007 - chat.agent - INFO - Received tool response from model
2025-06-17 15:00:03,518 - chat.agent - INFO - Processing persisted query
2025-06-17 15:00:05,185 - chat.agent - INFO - Received direct response from model
2025-06-17 15:00:16,051 - chat.agent - INFO - Processing persisted query
2025-06-17 15:00:17,541 - chat.agent - INFO - Received direct response from model
2025-06-17 15:01:41,822 - chat.agent - INFO - Initialized ChatAgent with model: gpt-4o
2025-06-17 15:01:42,492 - chat.agent - INFO - Processing persisted query
2025-06-17 15:01:44,698 - chat.agent - INFO - Received direct response from model
2025-06-17 15:01:54,061 - chat.agent - INFO - Conversation history erased
2025-06-17 15:01:56,844 - chat.agent - INFO - Processing persisted query
2025-06-17 15:01:58,621 - chat.agent - INFO - Received direct response from model
2025-06-17 15:02:04,515 - chat.agent - INFO - Processing persisted query
2025-06-17 15:02:05,816 - chat.agent - INFO - Received direct response from model
2025-06-17 15:02:20,077 - chat.agent - INFO - Processing persisted query
2025-06-17 15:02:20,953 - chat.agent - INFO - Received direct response from model
2025-06-17 15:02:30,250 - chat.agent - INFO - Processing persisted query
2025-06-17 15:02:31,659 - chat.agent - INFO - Received direct response from model
2025-06-17 15:03:46,814 - chat.agent - INFO - Initialized ChatAgent with model: gpt-4o
2025-06-17 15:03:47,962 - chat.agent - INFO - Processing persisted query
2025-06-17 15:03:47,970 - chat.agent - INFO - Loaded 26 tool definitions
2025-06-17 15:03:47,970 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:03:49,584 - chat.agent - INFO - No tool calls in response
2025-06-17 15:03:49,584 - chat.agent - INFO - Received direct response from model
2025-06-17 15:03:54,492 - chat.agent - INFO - Processing persisted query
2025-06-17 15:03:54,492 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:03:55,288 - chat.agent - INFO - Tool calls detected: 1
2025-06-17 15:03:55,289 - chat.agent - INFO - Calling tool: get_stock_quote with args: {'symbol': 'BP'}
2025-06-17 15:03:57,657 - chat.agent - INFO - Received tool response from model
2025-06-17 15:04:01,766 - chat.agent - INFO - Processing persisted query
2025-06-17 15:04:01,766 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:04:03,101 - chat.agent - INFO - Tool calls detected: 1
2025-06-17 15:04:03,101 - chat.agent - INFO - Calling tool: get_stock_bars with args: {'symbol': 'BP', 'days': 2}
2025-06-17 15:04:05,470 - chat.agent - INFO - Received tool response from model
2025-06-17 15:04:23,614 - chat.agent - INFO - Processing persisted query
2025-06-17 15:04:23,614 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:04:24,565 - chat.agent - INFO - No tool calls in response
2025-06-17 15:04:24,566 - chat.agent - INFO - Received direct response from model
2025-06-17 15:04:38,151 - chat.agent - INFO - Conversation history erased
2025-06-17 15:04:40,176 - chat.agent - INFO - Processing persisted query
2025-06-17 15:04:40,176 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:04:41,354 - chat.agent - INFO - No tool calls in response
2025-06-17 15:04:41,354 - chat.agent - INFO - Received direct response from model
2025-06-17 15:04:44,813 - chat.agent - INFO - Processing persisted query
2025-06-17 15:04:44,813 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:04:45,585 - chat.agent - INFO - Tool calls detected: 1
2025-06-17 15:04:45,586 - chat.agent - INFO - Calling tool: get_stock_quote with args: {'symbol': 'TSLA'}
2025-06-17 15:04:48,789 - chat.agent - INFO - Received tool response from model

[TOKEN USAGE]
  Prompt tokens: X
  Completion tokens: Y
  Total tokens: Z
2025-06-17 15:05:39,110 - chat.agent - INFO - Initialized ChatAgent with model: gpt-4o
2025-06-17 15:06:19,622 - chat.agent - INFO - Initialized ChatAgent with model: gpt-4o
2025-06-17 15:06:20,730 - chat.agent - INFO - Processing persisted query
2025-06-17 15:06:20,737 - chat.agent - INFO - Loaded 26 tool definitions
2025-06-17 15:06:20,737 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:06:21,791 - chat.agent - INFO - No tool calls in response
2025-06-17 15:06:21,791 - chat.agent - INFO - Received direct response from model
2025-06-17 15:06:27,517 - chat.agent - INFO - Processing persisted query
2025-06-17 15:06:27,518 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:06:28,536 - chat.agent - INFO - Tool calls detected: 1
2025-06-17 15:06:28,537 - chat.agent - INFO - Calling tool: get_stock_quote with args: {'symbol': 'TSLA'}
2025-06-17 15:06:30,884 - chat.agent - INFO - Received tool response from model
2025-06-17 15:09:09,162 - chat.agent - INFO - Initialized ChatAgent with model: gpt-4o
2025-06-17 15:09:10,258 - chat.agent - INFO - Processing persisted query
2025-06-17 15:09:10,265 - chat.agent - INFO - Loaded 26 tool definitions
2025-06-17 15:09:10,265 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:09:11,709 - chat.agent - INFO - No tool calls in response
2025-06-17 15:09:11,709 - chat.agent - INFO - Received direct response from model
2025-06-17 15:10:38,423 - chat.agent - INFO - Initialized ChatAgent with model: gpt-4o
2025-06-17 15:10:39,350 - chat.agent - INFO - Processing persisted query
2025-06-17 15:10:39,360 - chat.agent - INFO - Loaded 26 tool definitions
2025-06-17 15:10:39,360 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:10:44,547 - chat.agent - INFO - No tool calls in response
2025-06-17 15:10:44,547 - chat.agent - INFO - Received direct response from model
2025-06-17 15:11:45,664 - chat.agent - INFO - Initialized ChatAgent with model: gpt-4o
2025-06-17 15:11:49,916 - chat.agent - INFO - Initialized ChatAgent with model: gpt-4o
2025-06-17 15:11:51,374 - chat.agent - INFO - Processing persisted query
2025-06-17 15:11:51,384 - chat.agent - INFO - Loaded 26 tool definitions
2025-06-17 15:11:51,384 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:11:51,384 - chat.agent - INFO - Messages being sent to OpenAI:
2025-06-17 15:11:51,385 - chat.agent - INFO - Role: system, Content: You are an AI trading assistant that helps users interact with their Alpaca trading account. You hav...
2025-06-17 15:11:51,385 - chat.agent - INFO - Role: user, Content: token...
2025-06-17 15:11:51,385 - chat.agent - INFO - Number of tools: 26
2025-06-17 15:11:53,462 - chat.agent - INFO - No tool calls in response
2025-06-17 15:11:53,462 - chat.agent - INFO - Received direct response from model
2025-06-17 15:12:04,533 - chat.agent - INFO - Processing persisted query
2025-06-17 15:12:04,533 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:12:04,534 - chat.agent - INFO - Messages being sent to OpenAI:
2025-06-17 15:12:04,534 - chat.agent - INFO - Role: system, Content: You are an AI trading assistant that helps users interact with their Alpaca trading account. You hav...
2025-06-17 15:12:04,534 - chat.agent - INFO - Role: user, Content: what is bp today?...
2025-06-17 15:12:04,534 - chat.agent - INFO - Number of tools: 26
2025-06-17 15:12:05,305 - chat.agent - INFO - Tool calls detected: 1
2025-06-17 15:12:05,306 - chat.agent - INFO - Calling tool: get_account_info with args: {}
2025-06-17 15:12:06,306 - chat.agent - INFO - Messages being sent to OpenAI:
2025-06-17 15:12:06,307 - chat.agent - INFO - Role: system, Content: You are an AI trading assistant that helps users interact with their Alpaca trading account. You hav...
2025-06-17 15:12:07,483 - chat.agent - INFO - Received tool response from model
2025-06-17 15:12:14,121 - chat.agent - INFO - Processing persisted query
2025-06-17 15:12:14,121 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:12:14,121 - chat.agent - INFO - Messages being sent to OpenAI:
2025-06-17 15:12:14,121 - chat.agent - INFO - Role: system, Content: You are an AI trading assistant that helps users interact with their Alpaca trading account. You hav...
2025-06-17 15:12:14,121 - chat.agent - INFO - Role: user, Content: what is the BP price today?...
2025-06-17 15:12:14,121 - chat.agent - INFO - Number of tools: 26
2025-06-17 15:12:15,145 - chat.agent - INFO - Tool calls detected: 1
2025-06-17 15:12:15,146 - chat.agent - INFO - Calling tool: get_stock_quote with args: {'symbol': 'BP'}
2025-06-17 15:12:16,147 - chat.agent - INFO - Messages being sent to OpenAI:
2025-06-17 15:12:16,147 - chat.agent - INFO - Role: system, Content: You are an AI trading assistant that helps users interact with their Alpaca trading account. You hav...
2025-06-17 15:12:17,298 - chat.agent - INFO - Received tool response from model
2025-06-17 15:17:21,613 - chat.agent - INFO - Initialized ChatAgent with model: gpt-4o
2025-06-17 15:17:22,609 - chat.agent - INFO - Processing persisted query
2025-06-17 15:17:22,619 - chat.agent - INFO - Loaded 26 tool definitions
2025-06-17 15:17:22,619 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:17:22,619 - chat.agent - INFO - Messages being sent to OpenAI:
2025-06-17 15:17:22,619 - chat.agent - INFO - Role: system, Content: You are an AI trading assistant that helps users interact with their Alpaca trading account. You hav...
2025-06-17 15:17:22,620 - chat.agent - INFO - Role: user, Content: hi...
2025-06-17 15:17:22,620 - chat.agent - INFO - Number of tools: 26
2025-06-17 15:17:24,311 - chat.agent - INFO - No tool calls in response
2025-06-17 15:17:24,311 - chat.agent - INFO - Received direct response from model
2025-06-17 15:17:53,364 - chat.agent - INFO - Processing persisted query
2025-06-17 15:17:53,364 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:17:53,364 - chat.agent - INFO - Messages being sent to OpenAI:
2025-06-17 15:17:53,365 - chat.agent - INFO - Role: system, Content: You are an AI trading assistant that helps users interact with their Alpaca trading account. You hav...
2025-06-17 15:17:53,365 - chat.agent - INFO - Role: user, Content: hi...
2025-06-17 15:17:53,365 - chat.agent - INFO - Number of tools: 26
2025-06-17 15:17:55,026 - chat.agent - INFO - No tool calls in response
2025-06-17 15:17:55,026 - chat.agent - INFO - Received direct response from model
2025-06-17 15:18:03,634 - chat.agent - INFO - Processing persisted query
2025-06-17 15:18:03,634 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:18:03,634 - chat.agent - INFO - Messages being sent to OpenAI:
2025-06-17 15:18:03,634 - chat.agent - INFO - Role: system, Content: You are an AI trading assistant that helps users interact with their Alpaca trading account. You hav...
2025-06-17 15:18:03,634 - chat.agent - INFO - Role: user, Content: what's TSLA price over the past week...
2025-06-17 15:18:03,634 - chat.agent - INFO - Number of tools: 26
2025-06-17 15:18:04,656 - chat.agent - INFO - Tool calls detected: 1
2025-06-17 15:18:04,657 - chat.agent - INFO - Calling tool: get_stock_bars with args: {'symbol': 'TSLA', 'days': 5}
2025-06-17 15:18:05,658 - chat.agent - INFO - Messages being sent to OpenAI:
2025-06-17 15:18:05,658 - chat.agent - INFO - Role: system, Content: You are an AI trading assistant that helps users interact with their Alpaca trading account. You hav...
2025-06-17 15:18:05,658 - chat.agent - INFO - Role: tool, Content: [TextContent(type='text', text='Historical Data for TSLA (Last 5 trading days):\n-------------------...
2025-06-17 15:18:05,835 - chat.agent - ERROR - OpenAI API call failed: Error code: 400 - {'error': {'message': "Invalid parameter: messages with role 'tool' must be a response to a preceeding message with 'tool_calls'.", 'type': 'invalid_request_error', 'param': 'messages.[1].role', 'code': None}}
2025-06-17 15:18:05,836 - chat.agent - ERROR - Failed to handle response: Failed to get response from OpenAI: Error code: 400 - {'error': {'message': "Invalid parameter: messages with role 'tool' must be a response to a preceeding message with 'tool_calls'.", 'type': 'invalid_request_error', 'param': 'messages.[1].role', 'code': None}}
2025-06-17 15:18:05,836 - chat.agent - ERROR - Chat process failed: Failed to handle model response: Failed to get response from OpenAI: Error code: 400 - {'error': {'message': "Invalid parameter: messages with role 'tool' must be a response to a preceeding message with 'tool_calls'.", 'type': 'invalid_request_error', 'param': 'messages.[1].role', 'code': None}}
2025-06-17 15:18:51,297 - chat.agent - INFO - Initialized ChatAgent with model: gpt-4o
2025-06-17 15:18:52,373 - chat.agent - INFO - Processing persisted query
2025-06-17 15:18:52,377 - chat.agent - INFO - Loaded 26 tool definitions
2025-06-17 15:18:52,377 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:18:54,739 - chat.agent - INFO - No tool calls in response
2025-06-17 15:18:54,739 - chat.agent - INFO - Received direct response from model
2025-06-17 15:19:00,307 - chat.agent - INFO - Processing persisted query
2025-06-17 15:19:00,307 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:19:02,114 - chat.agent - INFO - No tool calls in response
2025-06-17 15:19:02,114 - chat.agent - INFO - Received direct response from model
2025-06-17 15:19:44,318 - chat.agent - INFO - Processing persisted query
2025-06-17 15:19:44,320 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:19:45,691 - chat.agent - INFO - No tool calls in response
2025-06-17 15:19:45,691 - chat.agent - INFO - Received direct response from model
2025-06-17 15:19:49,133 - chat.agent - INFO - Initialized ChatAgent with model: gpt-4o
2025-06-17 15:19:50,270 - chat.agent - INFO - Processing persisted query
2025-06-17 15:19:50,277 - chat.agent - INFO - Loaded 26 tool definitions
2025-06-17 15:19:50,277 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:19:51,106 - chat.agent - INFO - No tool calls in response
2025-06-17 15:19:51,106 - chat.agent - INFO - Received direct response from model
2025-06-17 15:19:55,236 - chat.agent - INFO - Processing persisted query
2025-06-17 15:19:55,237 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:19:55,999 - chat.agent - INFO - No tool calls in response
2025-06-17 15:19:56,000 - chat.agent - INFO - Received direct response from model
2025-06-17 15:20:09,022 - chat.agent - INFO - Processing persisted query
2025-06-17 15:20:09,022 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:20:09,895 - chat.agent - INFO - No tool calls in response
2025-06-17 15:20:09,895 - chat.agent - INFO - Received direct response from model
2025-06-17 15:20:15,101 - chat.agent - INFO - Processing persisted query
2025-06-17 15:20:15,101 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:20:15,778 - chat.agent - INFO - Tool calls detected: 1
2025-06-17 15:20:15,779 - chat.agent - INFO - Calling tool: get_stock_quote with args: {'symbol': 'TSLA'}
2025-06-17 15:20:18,260 - chat.agent - INFO - Received tool response from model
2025-06-17 15:20:25,159 - chat.agent - INFO - Processing persisted query
2025-06-17 15:20:25,159 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:20:26,229 - chat.agent - INFO - Tool calls detected: 1
2025-06-17 15:20:26,229 - chat.agent - INFO - Calling tool: place_stock_order with args: {'symbol': 'NVDA', 'side': 'buy', 'quantity': 1}
2025-06-17 15:20:28,692 - chat.agent - INFO - Received tool response from model
2025-06-17 15:20:55,602 - chat.agent - INFO - Processing persisted query
2025-06-17 15:20:55,602 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:20:56,400 - chat.agent - INFO - No tool calls in response
2025-06-17 15:20:56,400 - chat.agent - INFO - Received direct response from model
2025-06-17 15:21:02,313 - chat.agent - INFO - Processing persisted query
2025-06-17 15:21:02,314 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:21:03,031 - chat.agent - INFO - No tool calls in response
2025-06-17 15:21:03,031 - chat.agent - INFO - Received direct response from model
2025-06-17 15:21:05,952 - chat.agent - INFO - Conversation history erased
2025-06-17 15:21:10,118 - chat.agent - INFO - Processing persisted query
2025-06-17 15:21:10,118 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:21:11,151 - chat.agent - INFO - No tool calls in response
2025-06-17 15:21:11,151 - chat.agent - INFO - Received direct response from model
2025-06-17 15:21:14,232 - chat.agent - INFO - Processing persisted query
2025-06-17 15:21:14,232 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:21:15,526 - chat.agent - INFO - No tool calls in response
2025-06-17 15:21:15,527 - chat.agent - INFO - Received direct response from model
2025-06-17 15:21:23,155 - chat.agent - INFO - Processing persisted query
2025-06-17 15:21:23,155 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:21:24,235 - chat.agent - INFO - No tool calls in response
2025-06-17 15:21:24,235 - chat.agent - INFO - Received direct response from model
2025-06-17 15:21:27,053 - chat.agent - INFO - Processing persisted query
2025-06-17 15:21:27,053 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:21:27,721 - chat.agent - INFO - No tool calls in response
2025-06-17 15:21:27,721 - chat.agent - INFO - Received direct response from model
2025-06-17 15:21:28,236 - chat.agent - INFO - Processing persisted query
2025-06-17 15:21:28,236 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:21:29,940 - chat.agent - INFO - No tool calls in response
2025-06-17 15:21:29,940 - chat.agent - INFO - Received direct response from model
2025-06-17 15:21:34,353 - chat.agent - INFO - Processing persisted query
2025-06-17 15:21:34,354 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:21:35,911 - chat.agent - INFO - No tool calls in response
2025-06-17 15:21:35,911 - chat.agent - INFO - Received direct response from model
2025-06-17 15:22:27,485 - chat.agent - INFO - Initialized ChatAgent with model: gpt-4o
2025-06-17 15:22:28,756 - chat.agent - INFO - Processing persisted query
2025-06-17 15:22:28,767 - chat.agent - INFO - Loaded 26 tool definitions
2025-06-17 15:22:28,767 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:22:29,623 - chat.agent - INFO - No tool calls in response
2025-06-17 15:22:29,624 - chat.agent - INFO - Received direct response from model
2025-06-17 15:22:34,032 - chat.agent - INFO - Processing persisted query
2025-06-17 15:22:34,032 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:22:34,604 - chat.agent - INFO - No tool calls in response
2025-06-17 15:22:34,604 - chat.agent - INFO - Received direct response from model
2025-06-17 15:22:40,406 - chat.agent - INFO - Processing persisted query
2025-06-17 15:22:40,407 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:22:41,441 - chat.agent - INFO - No tool calls in response
2025-06-17 15:22:41,441 - chat.agent - INFO - Received direct response from model
2025-06-17 15:22:46,453 - chat.agent - INFO - Processing disposable query
2025-06-17 15:22:46,453 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:22:48,298 - chat.agent - INFO - No tool calls in response
2025-06-17 15:22:48,298 - chat.agent - INFO - Received direct response from model
2025-06-17 15:22:56,762 - chat.agent - INFO - Processing persisted query
2025-06-17 15:22:56,763 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:22:57,952 - chat.agent - INFO - No tool calls in response
2025-06-17 15:22:57,952 - chat.agent - INFO - Received direct response from model
2025-06-17 15:24:28,943 - chat.agent - INFO - Initialized ChatAgent with model: gpt-4o
2025-06-17 15:24:38,478 - chat.agent - INFO - Processing persisted query
2025-06-17 15:24:38,484 - chat.agent - INFO - Loaded 26 tool definitions
2025-06-17 15:24:38,484 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:24:39,651 - chat.agent - INFO - Tool calls detected: 2
2025-06-17 15:24:39,651 - chat.agent - INFO - Calling tool: place_stock_order with args: {'symbol': 'TSLA', 'side': 'buy', 'quantity': 1}
2025-06-17 15:24:39,777 - chat.agent - INFO - Calling tool: place_stock_order with args: {'symbol': 'AAPL', 'side': 'sell', 'quantity': 1}
2025-06-17 15:24:40,751 - chat.agent - ERROR - OpenAI API call failed: Error code: 400 - {'error': {'message': "An assistant message with 'tool_calls' must be followed by tool messages responding to each 'tool_call_id'. The following tool_call_ids did not have response messages: call_SHFKpsW8KQVx25qQ3wPfQuAN", 'type': 'invalid_request_error', 'param': 'messages.[4].role', 'code': None}}
2025-06-17 15:24:40,752 - chat.agent - ERROR - Failed to handle response: Failed to get response from OpenAI: Error code: 400 - {'error': {'message': "An assistant message with 'tool_calls' must be followed by tool messages responding to each 'tool_call_id'. The following tool_call_ids did not have response messages: call_SHFKpsW8KQVx25qQ3wPfQuAN", 'type': 'invalid_request_error', 'param': 'messages.[4].role', 'code': None}}
2025-06-17 15:24:40,752 - chat.agent - ERROR - Chat process failed: Failed to handle model response: Failed to get response from OpenAI: Error code: 400 - {'error': {'message': "An assistant message with 'tool_calls' must be followed by tool messages responding to each 'tool_call_id'. The following tool_call_ids did not have response messages: call_SHFKpsW8KQVx25qQ3wPfQuAN", 'type': 'invalid_request_error', 'param': 'messages.[4].role', 'code': None}}
2025-06-17 15:26:21,612 - chat.agent - INFO - Initialized ChatAgent with model: gpt-4o
2025-06-17 15:26:22,345 - chat.agent - INFO - Processing persisted query
2025-06-17 15:26:22,352 - chat.agent - INFO - Loaded 26 tool definitions
2025-06-17 15:26:22,353 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:26:24,396 - chat.agent - INFO - No tool calls in response
2025-06-17 15:26:24,396 - chat.agent - INFO - Received direct response from model
2025-06-17 15:26:30,535 - chat.agent - INFO - Processing persisted query
2025-06-17 15:26:30,535 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:26:31,238 - chat.agent - INFO - Tool calls detected: 1
2025-06-17 15:26:31,239 - chat.agent - INFO - Calling tool: place_stock_order with args: {'symbol': 'AMZN', 'side': 'buy', 'quantity': 1}
2025-06-17 15:26:35,248 - chat.agent - INFO - Received tool response from model
2025-06-17 15:26:40,695 - chat.agent - INFO - Processing persisted query
2025-06-17 15:26:40,696 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:26:41,792 - chat.agent - INFO - Tool calls detected: 2
2025-06-17 15:26:41,793 - chat.agent - INFO - Calling tool: place_stock_order with args: {'symbol': 'TSLA', 'side': 'buy', 'quantity': 1}
2025-06-17 15:26:41,825 - chat.agent - INFO - Calling tool: place_stock_order with args: {'symbol': 'T', 'side': 'buy', 'quantity': 1}
2025-06-17 15:26:46,831 - chat.agent - INFO - Received tool response from model
2025-06-17 15:28:24,195 - chat.agent - INFO - Initialized ChatAgent with model: gpt-4o
2025-06-17 15:28:25,724 - chat.agent - INFO - Processing persisted query
2025-06-17 15:28:25,734 - chat.agent - INFO - Loaded 26 tool definitions
2025-06-17 15:28:25,735 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:28:26,738 - chat.agent - INFO - No tool calls in response
2025-06-17 15:28:26,738 - chat.agent - INFO - Received direct response from model
2025-06-17 15:28:28,793 - chat.agent - INFO - Processing persisted query
2025-06-17 15:28:28,793 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:28:29,438 - chat.agent - INFO - Tool calls detected: 1
2025-06-17 15:28:29,439 - chat.agent - INFO - Calling tool: place_stock_order with args: {'symbol': 'T', 'side': 'buy', 'quantity': 1}
2025-06-17 15:28:32,612 - chat.agent - INFO - Received tool response from model
2025-06-17 15:28:39,181 - chat.agent - INFO - Processing persisted query
2025-06-17 15:28:39,181 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:28:40,646 - chat.agent - INFO - Tool calls detected: 2
2025-06-17 15:28:40,646 - chat.agent - INFO - Calling tool: place_stock_order with args: {'symbol': 'T', 'side': 'buy', 'quantity': 1}
2025-06-17 15:28:40,678 - chat.agent - INFO - Calling tool: place_stock_order with args: {'symbol': 'GOOG', 'side': 'buy', 'quantity': 1}
2025-06-17 15:28:40,702 - chat.agent - WARNING - Tool call returned error: [TextContent(type='text', text='Error placing order: {"code":42210000,"message":"client_order_id must be unique"}', annotations=None)]
2025-06-17 15:28:44,485 - chat.agent - INFO - Received tool response from model
2025-06-17 15:29:30,612 - chat.agent - INFO - Initialized ChatAgent with model: gpt-4o
2025-06-17 15:29:32,075 - chat.agent - INFO - Processing persisted query
2025-06-17 15:29:32,086 - chat.agent - INFO - Loaded 26 tool definitions
2025-06-17 15:29:32,086 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:29:33,488 - chat.agent - INFO - No tool calls in response
2025-06-17 15:29:33,488 - chat.agent - INFO - Received direct response from model
2025-06-17 15:29:41,840 - chat.agent - INFO - Processing persisted query
2025-06-17 15:29:41,841 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:29:42,916 - chat.agent - INFO - Tool calls detected: 2
2025-06-17 15:29:42,917 - chat.agent - INFO - Calling tool: place_stock_order with args: {'symbol': 'T', 'side': 'buy', 'quantity': 1, 'client_order_id': '3ff199c5-b20d-4664-9be6-999436d874c2'}
2025-06-17 15:29:42,947 - chat.agent - INFO - Calling tool: place_stock_order with args: {'symbol': 'GOOG', 'side': 'buy', 'quantity': 1, 'client_order_id': 'fdd0de34-5e2e-4e06-81db-c52daa3a2406'}
2025-06-17 15:29:45,455 - chat.agent - INFO - Received tool response from model
2025-06-17 15:30:51,362 - chat.agent - INFO - Processing persisted query
2025-06-17 15:30:51,362 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 15:30:56,136 - chat.agent - INFO - Tool calls detected: 2
2025-06-17 15:30:56,136 - chat.agent - INFO - Calling tool: get_stock_bars with args: {'symbol': 'GOOG', 'days': 20}
2025-06-17 15:30:56,260 - chat.agent - INFO - Calling tool: get_stock_bars with args: {'symbol': 'TSLA', 'days': 20}
2025-06-17 15:31:04,146 - chat.agent - INFO - Received tool response from model
2025-06-17 17:37:58,707 - chat.agent - INFO - Processing persisted query
2025-06-17 17:37:58,711 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 17:38:00,475 - chat.agent - INFO - No tool calls in response
2025-06-17 17:38:00,476 - chat.agent - INFO - Received direct response from model
2025-06-17 17:38:14,875 - chat.agent - INFO - Processing persisted query
2025-06-17 17:38:14,875 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 17:38:17,396 - chat.agent - INFO - No tool calls in response
2025-06-17 17:38:17,396 - chat.agent - INFO - Received direct response from model
2025-06-17 17:38:37,732 - chat.agent - INFO - Processing persisted query
2025-06-17 17:38:37,733 - chat.agent - INFO - Using 26 tools for this request
2025-06-17 17:38:39,548 - chat.agent - INFO - Tool calls detected: 2
2025-06-17 17:38:39,548 - chat.agent - INFO - Calling tool: get_stock_bars with args: {'symbol': 'BP', 'days': 20}
2025-06-17 17:38:40,009 - chat.agent - INFO - Calling tool: get_stock_bars with args: {'symbol': 'KO', 'days': 20}
2025-06-17 17:38:46,409 - chat.agent - INFO - Received tool response from model
2025-06-17 18:42:29,173 - mcp.client.sse - INFO - Connecting to SSE endpoint: http://localhost:8000/sse
2025-06-17 18:42:29,198 - httpx - INFO - HTTP Request: GET http://localhost:8000/sse "HTTP/1.1 200 OK"
2025-06-17 18:42:29,198 - mcp.client.sse - INFO - Received endpoint URL: http://localhost:8000/messages/?session_id=cfd19c0f611f40b69aef852e6f4a7193
2025-06-17 18:42:29,198 - mcp.client.sse - INFO - Starting post writer with endpoint URL: http://localhost:8000/messages/?session_id=cfd19c0f611f40b69aef852e6f4a7193
2025-06-17 18:42:29,200 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=cfd19c0f611f40b69aef852e6f4a7193 "HTTP/1.1 202 Accepted"
2025-06-17 18:42:29,205 - chat.agent - INFO - Initialized ChatAgent with model gpt-4o
2025-06-17 18:42:30,415 - chat.agent - INFO - Processing message (disposable=False): hi...
2025-06-17 18:42:30,419 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=cfd19c0f611f40b69aef852e6f4a7193 "HTTP/1.1 202 Accepted"
2025-06-17 18:42:30,421 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=cfd19c0f611f40b69aef852e6f4a7193 "HTTP/1.1 202 Accepted"
2025-06-17 18:42:30,578 - chat.agent - INFO - Cumulative token window: 23 tokens
2025-06-17 18:42:32,121 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-17 18:42:32,127 - chat.agent - INFO - Successfully received response from OpenAI
2025-06-17 18:42:32,127 - chat.agent - INFO - Successfully processed message and generated response
2025-06-17 18:45:01,666 - mcp.client.sse - INFO - Connecting to SSE endpoint: http://localhost:8000/sse
2025-06-17 18:45:01,692 - httpx - INFO - HTTP Request: GET http://localhost:8000/sse "HTTP/1.1 200 OK"
2025-06-17 18:45:01,692 - mcp.client.sse - INFO - Received endpoint URL: http://localhost:8000/messages/?session_id=abe8798ac2724f389904d309aef30849
2025-06-17 18:45:01,692 - mcp.client.sse - INFO - Starting post writer with endpoint URL: http://localhost:8000/messages/?session_id=abe8798ac2724f389904d309aef30849
2025-06-17 18:45:01,694 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=abe8798ac2724f389904d309aef30849 "HTTP/1.1 202 Accepted"
2025-06-17 18:45:01,699 - chat.agent - INFO - Initialized ChatAgent with model gpt-4o
2025-06-17 18:45:03,768 - chat.agent - INFO - Processing message (disposable=False): hi...
2025-06-17 18:45:03,774 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=abe8798ac2724f389904d309aef30849 "HTTP/1.1 202 Accepted"
2025-06-17 18:45:03,778 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=abe8798ac2724f389904d309aef30849 "HTTP/1.1 202 Accepted"
2025-06-17 18:45:04,945 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-17 18:45:04,952 - chat.agent - INFO - Token usage - Prompt: 5475, Completion: 12, Total: 5487
2025-06-17 18:45:04,952 - chat.agent - INFO - Successfully received response from OpenAI
2025-06-17 18:45:04,952 - chat.agent - INFO - Successfully processed message and generated response
2025-06-17 18:45:40,590 - chat.agent - INFO - Processing message (disposable=False): buy 1 share of amzn and then tell me when the american revolution happened...
2025-06-17 18:45:40,601 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=abe8798ac2724f389904d309aef30849 "HTTP/1.1 202 Accepted"
2025-06-17 18:45:42,157 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-17 18:45:42,160 - chat.agent - INFO - Token usage - Prompt: 5510, Completion: 24, Total: 5534
2025-06-17 18:45:42,160 - chat.agent - INFO - Successfully received response from OpenAI
2025-06-17 18:45:42,160 - chat.agent - INFO - Processing tool calls from LLM response
2025-06-17 18:45:42,161 - chat.agent - INFO - Executing tool call: place_stock_order with args: {'symbol': 'AMZN', 'side': 'buy', 'quantity': 1}
2025-06-17 18:45:42,163 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=abe8798ac2724f389904d309aef30849 "HTTP/1.1 202 Accepted"
2025-06-17 18:45:43,538 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-17 18:45:43,541 - chat.agent - INFO - Token usage - Prompt: 217, Completion: 48, Total: 265
2025-06-17 18:45:43,541 - chat.agent - INFO - Successfully received response from OpenAI
2025-06-17 18:45:43,541 - chat.agent - INFO - Successfully processed message and generated response
2025-06-17 18:45:56,298 - chat.agent - INFO - Processing message (disposable=False): when did the american revolution ahppen?...
2025-06-17 18:45:56,308 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=abe8798ac2724f389904d309aef30849 "HTTP/1.1 202 Accepted"
2025-06-17 18:45:57,527 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-17 18:45:57,529 - chat.agent - INFO - Token usage - Prompt: 5711, Completion: 36, Total: 5747
2025-06-17 18:45:57,529 - chat.agent - INFO - Successfully received response from OpenAI
2025-06-17 18:45:57,529 - chat.agent - INFO - Successfully processed message and generated response
2025-06-17 18:47:35,424 - mcp.client.sse - INFO - Connecting to SSE endpoint: http://localhost:8000/sse
2025-06-17 18:47:35,447 - httpx - INFO - HTTP Request: GET http://localhost:8000/sse "HTTP/1.1 200 OK"
2025-06-17 18:47:35,448 - mcp.client.sse - INFO - Received endpoint URL: http://localhost:8000/messages/?session_id=ebb6b876d077483c87553306f0a4c719
2025-06-17 18:47:35,448 - mcp.client.sse - INFO - Starting post writer with endpoint URL: http://localhost:8000/messages/?session_id=ebb6b876d077483c87553306f0a4c719
2025-06-17 18:47:35,450 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=ebb6b876d077483c87553306f0a4c719 "HTTP/1.1 202 Accepted"
2025-06-17 18:47:35,455 - chat.agent - INFO - Initialized ChatAgent with model gpt-4o
2025-06-17 18:47:36,082 - chat.agent - INFO - Processing message (disposable=False): hi...
2025-06-17 18:47:36,085 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=ebb6b876d077483c87553306f0a4c719 "HTTP/1.1 202 Accepted"
2025-06-17 18:47:36,087 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=ebb6b876d077483c87553306f0a4c719 "HTTP/1.1 202 Accepted"
2025-06-17 18:47:37,591 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-17 18:47:37,597 - chat.agent - INFO - Token usage - Prompt: 5475, Completion: 14, Total: 5489
2025-06-17 18:47:37,597 - chat.agent - INFO - Successfully received response from OpenAI
2025-06-17 18:47:37,597 - chat.agent - INFO - Successfully processed message and generated response
2025-06-17 18:49:40,753 - mcp.client.sse - INFO - Connecting to SSE endpoint: http://localhost:8000/sse
2025-06-17 18:49:40,777 - httpx - INFO - HTTP Request: GET http://localhost:8000/sse "HTTP/1.1 200 OK"
2025-06-17 18:49:40,777 - mcp.client.sse - INFO - Received endpoint URL: http://localhost:8000/messages/?session_id=2428d87faab244ce828182281aa85de0
2025-06-17 18:49:40,777 - mcp.client.sse - INFO - Starting post writer with endpoint URL: http://localhost:8000/messages/?session_id=2428d87faab244ce828182281aa85de0
2025-06-17 18:49:40,778 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=2428d87faab244ce828182281aa85de0 "HTTP/1.1 202 Accepted"
2025-06-17 18:49:40,784 - chat.agent - INFO - Initialized ChatAgent with model gpt-4o
2025-06-17 18:49:41,986 - chat.agent - INFO - Processing message (disposable=False): hit...
2025-06-17 18:49:41,990 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=2428d87faab244ce828182281aa85de0 "HTTP/1.1 202 Accepted"
2025-06-17 18:49:41,992 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=2428d87faab244ce828182281aa85de0 "HTTP/1.1 202 Accepted"
2025-06-17 18:49:43,619 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-17 18:49:43,624 - chat.agent - INFO - Token usage - Prompt: 5475, Completion: 16, Total: 5491
2025-06-17 18:49:43,624 - chat.agent - INFO - Cumulative tokens - Prompt: 5475, Completion: 16, Total: 5491
2025-06-17 18:49:43,624 - chat.agent - INFO - Successfully received response from OpenAI
2025-06-17 18:49:43,624 - chat.agent - INFO - Successfully processed message and generated response
2025-06-17 18:49:48,066 - chat.agent - INFO - Processing message (disposable=False): hi...
2025-06-17 18:49:48,071 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=2428d87faab244ce828182281aa85de0 "HTTP/1.1 202 Accepted"
2025-06-17 18:49:49,234 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-17 18:49:49,235 - chat.agent - INFO - Token usage - Prompt: 5499, Completion: 16, Total: 5515
2025-06-17 18:49:49,235 - chat.agent - INFO - Cumulative tokens - Prompt: 10974, Completion: 32, Total: 11006
2025-06-17 18:49:49,235 - chat.agent - INFO - Successfully received response from OpenAI
2025-06-17 18:49:49,235 - chat.agent - INFO - Successfully processed message and generated response
2025-06-17 18:50:05,400 - chat.agent - INFO - Processing message (disposable=False): how many tokens am i getting charged for?...
2025-06-17 18:50:05,405 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=2428d87faab244ce828182281aa85de0 "HTTP/1.1 202 Accepted"
2025-06-17 18:50:13,035 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-17 18:50:13,035 - chat.agent - INFO - Token usage - Prompt: 5531, Completion: 59, Total: 5590
2025-06-17 18:50:13,035 - chat.agent - INFO - Cumulative tokens - Prompt: 16505, Completion: 91, Total: 16596
2025-06-17 18:50:13,035 - chat.agent - INFO - Successfully received response from OpenAI
2025-06-17 18:50:13,035 - chat.agent - INFO - Successfully processed message and generated response
2025-06-17 18:50:27,571 - chat.agent - INFO - Processing message (disposable=False): do i get charged for the cumulative tokens throughout this session?...
2025-06-17 18:50:27,576 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=2428d87faab244ce828182281aa85de0 "HTTP/1.1 202 Accepted"
2025-06-17 18:50:30,639 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-17 18:50:30,641 - chat.agent - INFO - Token usage - Prompt: 5609, Completion: 93, Total: 5702
2025-06-17 18:50:30,641 - chat.agent - INFO - Cumulative tokens - Prompt: 22114, Completion: 184, Total: 22298
2025-06-17 18:50:30,641 - chat.agent - INFO - Successfully received response from OpenAI
2025-06-17 18:50:30,641 - chat.agent - INFO - Successfully processed message and generated response
2025-06-17 18:54:46,643 - mcp.client.sse - INFO - Connecting to SSE endpoint: http://localhost:8000/sse
2025-06-17 18:54:46,668 - httpx - INFO - HTTP Request: GET http://localhost:8000/sse "HTTP/1.1 200 OK"
2025-06-17 18:54:46,668 - mcp.client.sse - INFO - Received endpoint URL: http://localhost:8000/messages/?session_id=332722896f2a4eb4a79638855abb4159
2025-06-17 18:54:46,669 - mcp.client.sse - INFO - Starting post writer with endpoint URL: http://localhost:8000/messages/?session_id=332722896f2a4eb4a79638855abb4159
2025-06-17 18:54:46,670 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=332722896f2a4eb4a79638855abb4159 "HTTP/1.1 202 Accepted"
2025-06-17 18:54:46,676 - chat.agent - INFO - Initialized ChatAgent with model gpt-4o
2025-06-17 18:54:47,314 - chat.agent - INFO - Processing message (disposable=False): hi...
2025-06-17 18:54:47,317 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=332722896f2a4eb4a79638855abb4159 "HTTP/1.1 202 Accepted"
2025-06-17 18:54:47,319 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=332722896f2a4eb4a79638855abb4159 "HTTP/1.1 202 Accepted"
2025-06-17 18:54:48,453 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-17 18:54:48,456 - chat.agent - INFO - Token usage - Prompt: 5475, Completion: 16, Total: 5491
2025-06-17 18:54:48,456 - chat.agent - INFO - Cumulative tokens - Prompt: 5475, Completion: 16, Total: 5491
2025-06-17 18:54:48,456 - chat.agent - INFO - Successfully received response from OpenAI
2025-06-17 18:54:48,457 - chat.agent - INFO - Successfully processed message and generated response
2025-06-17 18:54:58,616 - chat.agent - INFO - Processing message (disposable=False): and this?...
2025-06-17 18:54:58,620 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=332722896f2a4eb4a79638855abb4159 "HTTP/1.1 202 Accepted"
2025-06-17 18:54:59,897 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-17 18:54:59,899 - chat.agent - INFO - Token usage - Prompt: 5501, Completion: 28, Total: 5529
2025-06-17 18:54:59,899 - chat.agent - INFO - Cumulative tokens - Prompt: 10976, Completion: 44, Total: 11020
2025-06-17 18:54:59,902 - chat.agent - INFO - Successfully received response from OpenAI
2025-06-17 18:54:59,902 - chat.agent - INFO - Successfully processed message and generated response
2025-06-17 18:55:24,161 - chat.agent - INFO - Processing message (disposable=False): does the llm now have a memory?...
2025-06-17 18:55:24,166 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=332722896f2a4eb4a79638855abb4159 "HTTP/1.1 202 Accepted"
2025-06-17 18:55:26,734 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-17 18:55:26,735 - chat.agent - INFO - Token usage - Prompt: 5545, Completion: 60, Total: 5605
2025-06-17 18:55:26,736 - chat.agent - INFO - Cumulative tokens - Prompt: 16521, Completion: 104, Total: 16625
2025-06-17 18:55:26,736 - chat.agent - INFO - Successfully received response from OpenAI
2025-06-17 18:55:26,736 - chat.agent - INFO - Successfully processed message and generated response
2025-06-17 18:55:38,113 - chat.agent - INFO - Processing message (disposable=False): how many message calls do you have in your memory?...
2025-06-17 18:55:38,118 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=332722896f2a4eb4a79638855abb4159 "HTTP/1.1 202 Accepted"
2025-06-17 18:55:39,958 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-17 18:55:39,960 - chat.agent - INFO - Token usage - Prompt: 5623, Completion: 62, Total: 5685
2025-06-17 18:55:39,960 - chat.agent - INFO - Cumulative tokens - Prompt: 22144, Completion: 166, Total: 22310
2025-06-17 18:55:39,960 - chat.agent - INFO - Successfully received response from OpenAI
2025-06-17 18:55:39,960 - chat.agent - INFO - Successfully processed message and generated response
2025-06-17 18:55:49,011 - chat.agent - INFO - Processing message (disposable=False): how many messages in this session?...
2025-06-17 18:55:49,017 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=332722896f2a4eb4a79638855abb4159 "HTTP/1.1 202 Accepted"
2025-06-17 18:55:50,548 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-17 18:55:50,556 - chat.agent - INFO - Token usage - Prompt: 5699, Completion: 33, Total: 5732
2025-06-17 18:55:50,556 - chat.agent - INFO - Cumulative tokens - Prompt: 27843, Completion: 199, Total: 28042
2025-06-17 18:55:50,557 - chat.agent - INFO - Successfully received response from OpenAI
2025-06-17 18:55:50,557 - chat.agent - INFO - Successfully processed message and generated response
2025-06-17 18:56:24,972 - mcp.client.sse - INFO - Connecting to SSE endpoint: http://localhost:8000/sse
2025-06-17 18:56:24,995 - httpx - INFO - HTTP Request: GET http://localhost:8000/sse "HTTP/1.1 200 OK"
2025-06-17 18:56:24,995 - mcp.client.sse - INFO - Received endpoint URL: http://localhost:8000/messages/?session_id=6a383b06e60548f7ba5b936e440d69fa
2025-06-17 18:56:24,995 - mcp.client.sse - INFO - Starting post writer with endpoint URL: http://localhost:8000/messages/?session_id=6a383b06e60548f7ba5b936e440d69fa
2025-06-17 18:56:24,997 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=6a383b06e60548f7ba5b936e440d69fa "HTTP/1.1 202 Accepted"
2025-06-17 18:56:25,002 - chat.agent - INFO - Initialized ChatAgent with model gpt-4o
2025-06-17 18:56:26,475 - chat.agent - INFO - Processing message (disposable=False): git status...
2025-06-17 18:56:26,478 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=6a383b06e60548f7ba5b936e440d69fa "HTTP/1.1 202 Accepted"
2025-06-17 18:56:26,481 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=6a383b06e60548f7ba5b936e440d69fa "HTTP/1.1 202 Accepted"
2025-06-17 18:56:30,318 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-17 18:56:30,324 - chat.agent - INFO - Token usage - Prompt: 5476, Completion: 140, Total: 5616
2025-06-17 18:56:30,324 - chat.agent - INFO - Cumulative tokens - Prompt: 5476, Completion: 140, Total: 5616
2025-06-17 18:56:30,324 - chat.agent - INFO - Successfully received response from OpenAI
2025-06-17 18:56:30,324 - chat.agent - INFO - Successfully processed message and generated response
2025-06-17 18:56:37,005 - mcp.client.sse - INFO - Connecting to SSE endpoint: http://localhost:8000/sse
2025-06-17 18:56:37,024 - httpx - INFO - HTTP Request: GET http://localhost:8000/sse "HTTP/1.1 200 OK"
2025-06-17 18:56:37,024 - mcp.client.sse - INFO - Received endpoint URL: http://localhost:8000/messages/?session_id=7b341c7998f342f78f47f12a292bfe87
2025-06-17 18:56:37,024 - mcp.client.sse - INFO - Starting post writer with endpoint URL: http://localhost:8000/messages/?session_id=7b341c7998f342f78f47f12a292bfe87
2025-06-17 18:56:37,026 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=7b341c7998f342f78f47f12a292bfe87 "HTTP/1.1 202 Accepted"
2025-06-17 18:56:37,031 - chat.agent - INFO - Initialized ChatAgent with model gpt-4o
2025-06-17 18:56:38,144 - chat.agent - INFO - Processing message (disposable=False): hi...
2025-06-17 18:56:38,146 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=7b341c7998f342f78f47f12a292bfe87 "HTTP/1.1 202 Accepted"
2025-06-17 18:56:38,148 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=7b341c7998f342f78f47f12a292bfe87 "HTTP/1.1 202 Accepted"
2025-06-17 18:56:39,249 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-17 18:56:39,254 - chat.agent - INFO - Token usage - Prompt: 5475, Completion: 14, Total: 5489
2025-06-17 18:56:39,255 - chat.agent - INFO - Cumulative tokens - Prompt: 5475, Completion: 14, Total: 5489
2025-06-17 18:56:39,255 - chat.agent - INFO - Successfully received response from OpenAI
2025-06-17 18:56:39,255 - chat.agent - INFO - Successfully processed message and generated response
2025-06-17 18:56:43,789 - chat.agent - INFO - Processing message (disposable=False): buy 1 share of amzn...
2025-06-17 18:56:43,795 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=7b341c7998f342f78f47f12a292bfe87 "HTTP/1.1 202 Accepted"
2025-06-17 18:56:45,085 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-17 18:56:45,089 - chat.agent - INFO - Token usage - Prompt: 5503, Completion: 24, Total: 5527
2025-06-17 18:56:45,089 - chat.agent - INFO - Cumulative tokens - Prompt: 10978, Completion: 38, Total: 11016
2025-06-17 18:56:45,089 - chat.agent - INFO - Successfully received response from OpenAI
2025-06-17 18:56:45,089 - chat.agent - INFO - Processing tool calls from LLM response
2025-06-17 18:56:45,090 - chat.agent - INFO - Executing tool call: place_stock_order with args: {'symbol': 'AMZN', 'side': 'buy', 'quantity': 1}
2025-06-17 18:56:45,092 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=7b341c7998f342f78f47f12a292bfe87 "HTTP/1.1 202 Accepted"
2025-06-17 18:56:46,035 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-17 18:56:46,041 - chat.agent - INFO - Token usage - Prompt: 211, Completion: 113, Total: 324
2025-06-17 18:56:46,041 - chat.agent - INFO - Cumulative tokens - Prompt: 11189, Completion: 151, Total: 11340
2025-06-17 18:56:46,041 - chat.agent - INFO - Successfully received response from OpenAI
2025-06-17 18:56:46,042 - chat.agent - INFO - Successfully processed message and generated response
2025-06-17 18:56:50,891 - chat.agent - INFO - Processing message (disposable=False): buy 1 share of t and tsla...
2025-06-17 18:56:50,896 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=7b341c7998f342f78f47f12a292bfe87 "HTTP/1.1 202 Accepted"
2025-06-17 18:56:52,772 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-17 18:56:52,774 - chat.agent - INFO - Token usage - Prompt: 5771, Completion: 63, Total: 5834
2025-06-17 18:56:52,775 - chat.agent - INFO - Cumulative tokens - Prompt: 16960, Completion: 214, Total: 17174
2025-06-17 18:56:52,775 - chat.agent - INFO - Successfully received response from OpenAI
2025-06-17 18:56:52,775 - chat.agent - INFO - Processing tool calls from LLM response
2025-06-17 18:56:52,775 - chat.agent - INFO - Executing tool call: place_stock_order with args: {'symbol': 'T', 'side': 'buy', 'quantity': 1}
2025-06-17 18:56:52,778 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=7b341c7998f342f78f47f12a292bfe87 "HTTP/1.1 202 Accepted"
2025-06-17 18:56:52,816 - chat.agent - INFO - Executing tool call: place_stock_order with args: {'symbol': 'TSLA', 'side': 'buy', 'quantity': 1}
2025-06-17 18:56:52,818 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=7b341c7998f342f78f47f12a292bfe87 "HTTP/1.1 202 Accepted"
2025-06-17 18:56:56,338 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-17 18:56:56,340 - chat.agent - INFO - Token usage - Prompt: 564, Completion: 177, Total: 741
2025-06-17 18:56:56,340 - chat.agent - INFO - Cumulative tokens - Prompt: 17524, Completion: 391, Total: 17915
2025-06-17 18:56:56,340 - chat.agent - INFO - Successfully received response from OpenAI
2025-06-17 18:56:56,340 - chat.agent - INFO - Successfully processed message and generated response
2025-06-17 18:57:02,114 - chat.agent - INFO - Processing message (disposable=False): try again...
2025-06-17 18:57:02,119 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=7b341c7998f342f78f47f12a292bfe87 "HTTP/1.1 202 Accepted"
2025-06-17 18:57:03,823 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-17 18:57:03,824 - chat.agent - INFO - Token usage - Prompt: 6181, Completion: 33, Total: 6214
2025-06-17 18:57:03,824 - chat.agent - INFO - Cumulative tokens - Prompt: 23705, Completion: 424, Total: 24129
2025-06-17 18:57:03,825 - chat.agent - INFO - Successfully received response from OpenAI
2025-06-17 18:57:03,825 - chat.agent - INFO - Processing tool calls from LLM response
2025-06-17 18:57:03,825 - chat.agent - INFO - Executing tool call: place_stock_order with args: {'symbol': 'TSLA', 'side': 'buy', 'quantity': 1, 'client_order_id': 'order_tsla_unique'}
2025-06-17 18:57:03,828 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=7b341c7998f342f78f47f12a292bfe87 "HTTP/1.1 202 Accepted"
2025-06-17 18:57:05,534 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-17 18:57:05,535 - chat.agent - INFO - Token usage - Prompt: 892, Completion: 111, Total: 1003
2025-06-17 18:57:05,535 - chat.agent - INFO - Cumulative tokens - Prompt: 24597, Completion: 535, Total: 25132
2025-06-17 18:57:05,535 - chat.agent - INFO - Successfully received response from OpenAI
2025-06-17 18:57:05,536 - chat.agent - INFO - Successfully processed message and generated response
2025-06-17 18:57:19,521 - chat.agent - INFO - Processing message (disposable=False): buy 1 more of t and tsla...
2025-06-17 18:57:19,527 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=7b341c7998f342f78f47f12a292bfe87 "HTTP/1.1 202 Accepted"
2025-06-17 18:57:21,155 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-17 18:57:21,157 - chat.agent - INFO - Token usage - Prompt: 6450, Completion: 84, Total: 6534
2025-06-17 18:57:21,157 - chat.agent - INFO - Cumulative tokens - Prompt: 31047, Completion: 619, Total: 31666
2025-06-17 18:57:21,157 - chat.agent - INFO - Successfully received response from OpenAI
2025-06-17 18:57:21,157 - chat.agent - INFO - Processing tool calls from LLM response
2025-06-17 18:57:21,157 - chat.agent - INFO - Executing tool call: place_stock_order with args: {'symbol': 'T', 'side': 'buy', 'quantity': 1, 'client_order_id': 'order_t_unique_2'}
2025-06-17 18:57:21,159 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=7b341c7998f342f78f47f12a292bfe87 "HTTP/1.1 202 Accepted"
2025-06-17 18:57:21,197 - chat.agent - INFO - Executing tool call: place_stock_order with args: {'symbol': 'TSLA', 'side': 'buy', 'quantity': 1, 'client_order_id': 'order_tsla_unique_2'}
2025-06-17 18:57:21,200 - httpx - INFO - HTTP Request: POST http://localhost:8000/messages/?session_id=7b341c7998f342f78f47f12a292bfe87 "HTTP/1.1 202 Accepted"
2025-06-17 18:57:22,349 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-06-17 18:57:22,361 - chat.agent - INFO - Token usage - Prompt: 1340, Completion: 197, Total: 1537
2025-06-17 18:57:22,361 - chat.agent - INFO - Cumulative tokens - Prompt: 32387, Completion: 816, Total: 33203
2025-06-17 18:57:22,361 - chat.agent - INFO - Successfully received response from OpenAI
2025-06-17 18:57:22,361 - chat.agent - INFO - Successfully processed message and generated response
